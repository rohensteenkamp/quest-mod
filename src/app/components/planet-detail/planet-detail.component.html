<div id="intro" class="middle">
  <div class="container">

    <div class="row justify-content-center align-items-center">
      <div class="col-6">
        <div class="card bg-info">

          <div class="row justify-content-center align-items-center">
            <div class="col-10 text-center">
              <h1 class="header text-white">Quest Listings</h1>
              <ul class="list-group">
                <li class="my-1 list-group-item list-group-item-action" *ngFor = "let quest of quests">
                  <b>{{quest.title}}</b> 
                  <br>
                  <p>{{quest.description}}</p>
                  <button type="button" 
                    class="btn btn-outline-danger btn-pill" 
                    (click)="openModal(true); selectQuest(quest)">X
                  </button>
                  <button type="button" 
                    class="btn btn-outline-primary btn-pill ml-1" 
                    (click)="this.isEditVisible = true; selectQuest(quest)">Edit
                  </button>                      
                </li>
              </ul>
            </div>
          </div>

          <div *ngIf="!this.isEditVisible" class="row justify-content-center align-items-center">
            <div class="col-10 text-center">
              <h1 class="header text-white">Create a Quest</h1>
              <input [(ngModel)]="newQuest.title" 
                type="text" 
                class="form-control my-1" 
                placeholder="new title..." />
              <input [(ngModel)]="newQuest.description" 
                type="text" 
                class="form-control my-1" 
                placeholder="new description..." />
              <input [(ngModel)]="newQuest.max_xp" 
                type="text" 
                class="form-control my-1" 
                placeholder="new max xp..." />
              <input [(ngModel)]="newQuest.order" 
                type="number" 
                class="form-control my-1" 
                placeholder="new order..." />
              <input [(ngModel)]="newQuest.prerequisites" 
                type="text" 
                class="form-control my-1" 
                placeholder="new prerequisites..."
                (keyup.enter)="addQuest(newQuest)" />
              <br>
              <button type="button" 
                class=" btn btn-success mb-2" 
                (click)="addQuest(newQuest)">Create
              </button>
            </div>
          </div>

          <div class="row justify-content-center align-items-center">
            <div *ngIf="this.isEditVisible" class="col-10 text-center">
              <h1 class="header text-white">Edit a Quest</h1>
              <input #editedQuestTitle class="form-control my-1"
                type="text"
                value="{{globalService.selectedQuest.title}}"
                (keyup.enter)="globalService.selectedQuest.title = editedQuestTitle.value; 
                  editQuest(globalService.selectedQuest); 
                  this.isEditVisible = false" />
              <input #editedQuestDescription
                type="text"
                class="form-control my-1"
                value="{{globalService.selectedQuest.description}}"
                (keyup.enter)="globalService.selectedQuest.description = editedQuestDescription.value; 
                  editQuest(globalService.selectedQuest); 
                  this.isEditVisible = false" />
              <input #editedQuestMaxXP
                type="text"
                class="form-control my-1"
                value="{{globalService.selectedQuest.max_xp}}"
                (keyup.enter)="globalService.selectedQuest.max_xp = editedQuestMaxXP.value; 
                  editQuest(globalService.selectedQuest); 
                  this.isEditVisible = false" /> 
              <input #editedQuestOrder
                type="number"
                class="form-control my-1"
                value="{{globalService.selectedQuest.order}}"
                (keyup.enter)="globalService.selectedQuest.order = editedQuestOrder.value; 
                  editQuest(globalService.selectedQuest); 
                  this.isEditVisible = false" />
              <input #editedQuestPrerequisites
                type="text"
                class="form-control my-1"
                value="{{globalService.selectedQuest.prerequisites}}"
                (keyup.enter)="globalService.selectedQuest.prerequisites = editedQuestPrerequisites.value; 
                  editQuest(globalService.selectedQuest); 
                  this.isEditVisible = false" /> 
              <br>
              <button type="button"
                class="btn btn-success mb-2"
                (click)="globalService.selectedQuest.title = editedQuestTitle.value;
                  globalService.selectedQuest.description = editedQuestDescription.value;
                  globalService.selectedQuest.max_xp = editedQuestMaxXP.value;
                  globalService.selectedQuest.order = editedQuestOrder.value;
                  globalService.selectedQuest.prerequisites = editedQuestPrerequisites.value;
                  editQuest(globalService.selectedQuest); 
                  this.isEditVisible = false">Save
              </button>
            </div>
          </div>

        </div>  
      </div>
    </div>

  </div>
</div>
